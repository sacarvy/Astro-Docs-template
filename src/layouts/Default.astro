---
import Core from './Core.astro';
import { twMerge } from 'tailwind-merge';
import { Sprite } from 'astro-icon';

export interface Props {
	title: string;
	description: string;
	date?: string;
	image?: string;
	isArticle?: boolean;
	layout?: string;

	class?: string;
}

const ifArticle = (ifStr = '', elStr = '') => (otherProps.isArticle ? ifStr : elStr);
const builtWith = ['astro', 'typescript', 'tailwindcss'];

const { layout, class: className, ...otherProps } = Astro.props;
console.log(otherProps);
const maxW = ifArticle('max-w-2xl', 'max-w-6xl');

const mainCls = twMerge(
	'mt-20 flex flex-col items-center justify-center w-full max-w-none',
	ifArticle('mt-4'),
  maxW,
	className
);
---

<Core
	class="flex flex-col items-center px-2 md:px-4 lg:px-6 pt-4 bg-zinc-100 text-zinc-900"
	{...otherProps}
>
	<header class="w-full max-w-screen-2xl">
		<nav class="flex items-center gap-x-1.5 w-full select-none">
			<div class="flex items-center gap-x-1.5">
				<a
					href="/profile"
					class="flex hover:bg-white items-center rounded-md px-2 py-1 gap-x-1 shadow-sm shadow-purple-600/30 hover:shadow-purple-400/30 bg-zinc-50 transition-colors"
				>
					<Sprite pack="heroicons-outline" name="user" class="w-5 h-5" />
					<span> Profile</span>
				</a>
				<a href="/resume" class="flex hover:bg-white items-center rounded-md px-2 py-1 gap-x-1 shadow-sm shadow-purple-600/30 hover:shadow-purple-400/30 bg-zinc-50 transition-colors">
					<Sprite pack="heroicons-outline" name="document-text" class="w-5 h-5" />
					<span>Resume</span>
				</a>
				<a
					href="/writings"
					class="flex hover:bg-white items-center rounded-md px-2 py-1 gap-x-1 shadow-sm shadow-purple-600/30 hover:shadow-purple-400/30 bg-zinc-50 transition-colors"
				>
					<Sprite pack="heroicons-outline" name="pencil-alt" class="w-5 h-5" />
					<span> Writings</span>
				</a>
			  <button class="flex hover:bg-white items-center rounded-md px-2 py-1 gap-x-1 shadow-sm shadow-purple-600/30 hover:shadow-purple-400/30 bg-zinc-50 transition-colors">
				  <Sprite pack="fluent" name="search-24-regular" class="w-5 h-5 my-0.5" />
			  </button>
				<div
					class="flex relative hover:bg-white items-center rounded-md px-2 py-1 gap-x-1 shadow-sm shadow-purple-600/30 hover:shadow-purple-400/30 bg-zinc-50 transition-colors group"
				>
        <a href="/rss.xml" class="">
					  <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24">
              <circle cx="5" cy="12" r="1" fill="currentColor"/>
              <circle cx="12" cy="12" r="1" fill="currentColor"/>
              <circle cx="19" cy="12" r="1" fill="currentColor"/>
            </svg>
						<div
							class="absolute left-1/2 -translate-x-1/2 border-4 opacity-0 group-hover:opacity-100 border-slate-400 border-x-transparent border-t-transparent"
						>
						</div>
					</a>
					<div
						class="absolute flex gap-x-1 w-auto p-2 min-w-max z-10 top-[36px] -left-20 origin-center rounded-md bg-white shadow text-xs font-bold transition-transform group-hover:delay-300 duration-100 scale-0 group-hover:scale-100"
					>
						<span class="inline-block">
							<a class="underline flex items-center gap-x-1 w-max text-slate-500 hover:text-slate-800 transition-colors" href="#">
					      <Sprite pack="ph" name="rss-simple-bold" class="w-4 h-4" />
                rss
              </a>
						</span>
						<span class="select-none"> /</span>
						<span class="inline-block">
							<a class="underline flex items-center gap-x-1 w-max text-sky-500 hover:text-sky-800 transition-colors" href="#">
					      <Sprite pack="logos" name="twitter" class="w-4 h-4" />
                Twitter
              </a>
						</span>
						<span class="select-none"> /</span>
						<span class="inline-block">
							<a class="underline flex items-center gap-x-1 w-max text-stone-500 hover:text-stone-800 transition-colors" href="#">
					      <Sprite pack="logos" name="github-icon" class="w-4 h-4" />
                Github
              </a>
						</span>
					</div>
				</div>
			</div>
			<div class="grow flex whitespace-nowrap items-center overflow-x-scroll gap-x-2 mx-1 rounded-md">
				<span class="w-max"> Recent Projects</span>
        <ul class="flex w-max gap-x-2 items-center">
				<li class="flex items-center shadow-sm shadow-purple-600/30 hover:shadow-purple-400/30 rounded-md">
					<span class="py-1.5 pr-0.5 pl-2 bg-white rounded-l-md">
						<Sprite pack="logos" name="typescript-icon" class="w-5 h-5" />
					</span>
					<span class="bg-white p-1">Algorithm Visualizer</span>
					<span class="px-2 bg-zinc-200/50 hover:bg-zinc-200 py-2">
						<Sprite pack="radix-icons" name="external-link" class="w-4 h-4" />
					</span>
					<span class="px-2 bg-zinc-100/20 hover:bg-zinc-200 py-2 rounded-r-md">
						<Sprite pack="radix-icons" name="github-logo" class="w-4 h-4" />
					</span>
				</li>
				<li class="flex items-center shadow-sm shadow-purple-600/30 hover:shadow-purple-400/30 rounded-md">
					<span class="py-1.5 pr-0.5 pl-2 bg-white rounded-l-md">
						<Sprite pack="logos" name="go" class="w-8 h-5" />
					</span>
					<span class="bg-white p-1">Command line Application, Typing Master.</span>
					<span class="px-2 bg-zinc-200/50 hover:bg-zinc-200 py-2">
						<Sprite pack="radix-icons" name="external-link" class="w-4 h-4" />
					</span>
					<span class="px-2 bg-zinc-100/20 hover:bg-zinc-200 py-2 rounded-r-md">
						<Sprite pack="radix-icons" name="github-logo" class="w-4 h-4" />
					</span>
				</li>
				<li class="flex items-center shadow-sm shadow-purple-600/30 hover:shadow-purple-400/30 rounded-md">
					<span class="py-1.5 pr-0.5 pl-2 bg-white rounded-l-md">
						<Sprite pack="logos" name="go" class="w-8 h-5" />
					</span>
					<span class="bg-white p-1">Payments API, built with go-stripe lib.</span>
					<span class="px-2 bg-zinc-200/50 hover:bg-zinc-200 py-2">
						<Sprite pack="radix-icons" name="external-link" class="w-4 h-4" />
					</span>
					<span class="px-2 bg-zinc-100/20 hover:bg-zinc-200 py-2 rounded-r-md">
						<Sprite pack="radix-icons" name="github-logo" class="w-4 h-4" />
					</span>
				</li>
        </ul>
			</div>
			<a
				href="/projects"
				class="flex hover:bg-white items-center text-zinc-900 rounded-md px-2 py-1 gap-x-1 shadow-sm shadow-purple-600/30 hover:shadow-purple-400/30 bg-zinc-50 transition-colors"
			>
				<span class='whitespace-nowrap'>All Projects</span>
				<Sprite pack="fluent" name="arrow-right-24-regular" class="w-5 h-5" />
			</a>
		</nav>
	</header>
	<!-- Here is our page's main content -->
	<main class={mainCls}>
		<slot />
	</main>
</Core>
